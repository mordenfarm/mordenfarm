
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | Modern Farmer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">

    <style>
        /* --- CSS RESET & ROOT VARIABLES --- */
        :root {
            --primary-color: #4CAF50; /* A professional green */
            --primary-dark: #388E3C;
            --secondary-color: #2c3e50; /* Dark blue-gray */
            --background-light: #f4f7f6;
            --background-dark: #ffffff;
            --text-primary: #333333;
            --text-secondary: #757575;
            --border-color: #e0e0e0;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --sidebar-width: 260px;
            --header-height: 70px;
            --border-radius: 8px;
            --transition-speed: 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            overflow: hidden; /* Prevent scrolling on the body */
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--background-light);
            color: var(--text-primary);
            font-size: 16px;
        }

        /* --- LAYOUT & HEADER --- */
        .dashboard-container {
            display: flex;
            height: 100vh;
        }

        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--header-height);
            background-color: var(--background-dark);
            display: flex;
            align-items: center;
            padding: 0 2rem;
            border-bottom: 1px solid var(--border-color);
            z-index: 1000;
        }

        .header .logo img {
            height: 45px;
            width: auto;
        }

        .header .logo-text {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            margin-left: 1rem;
            color: var(--secondary-color);
        }

        .mobile-menu-toggle {
            display: none; /* Hidden on desktop */
            background: none;
            border: none;
            cursor: pointer;
            z-index: 1001;
            margin-left: auto;
        }

        /* --- SIDEBAR NAVIGATION --- */
        .sidebar {
            width: var(--sidebar-width);
            flex-shrink: 0;
            background-color: var(--secondary-color);
            color: white;
            padding-top: var(--header-height);
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            transition: transform var(--transition-speed);
            z-index: 999;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 1.5rem 1rem;
            text-align: center;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.7);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-nav {
            list-style: none;
            padding: 1rem 0;
        }

        .nav-item a {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: background-color var(--transition-speed), color var(--transition-speed);
            font-weight: 500;
        }
        
        .nav-item a:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .nav-item a.active {
            background-color: var(--primary-color);
            color: white;
            font-weight: 700;
        }
        
        .nav-item a svg {
            width: 22px;
            height: 22px;
            margin-right: 1rem;
            flex-shrink: 0;
        }

        /* --- MAIN CONTENT AREA --- */
        .main-content {
            flex-grow: 1;
            margin-left: var(--sidebar-width);
            padding: calc(var(--header-height) + 2rem) 2rem 2rem;
            height: 100vh;
            overflow-y: auto;
            transition: margin-left var(--transition-speed);
        }

        #editor-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 70vh;
            text-align: center;
            color: var(--text-secondary);
        }

        #editor-placeholder svg {
            width: 80px;
            height: 80px;
            margin-bottom: 1rem;
            opacity: 0.6;
        }
        
        #editor-placeholder h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
        }

        /* --- CONTENT EDITOR STYLES --- */
        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .editor-header h1 {
            font-family: 'Poppins', sans-serif;
            color: var(--secondary-color);
        }

        .editor-actions button {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 500;
            border-radius: var(--border-radius);
            border: none;
            cursor: pointer;
            transition: all var(--transition-speed);
            margin-left: 1rem;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
        }

        /* Card Styles */
        .notes-card {
            background-color: var(--background-dark);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            margin-bottom: 1.5rem;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .card-header {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            cursor: pointer;
            background-color: #fafafa;
            border-bottom: 1px solid var(--border-color);
        }

        .card-toggle-icon {
            transition: transform var(--transition-speed);
            margin-right: 1rem;
        }

        .card-content.collapsed .card-toggle-icon {
            transform: rotate(-90deg);
        }

        .card-title-input {
            flex-grow: 1;
            font-size: 1.2rem;
            font-weight: 600;
            border: none;
            outline: none;
            background: transparent;
            font-family: 'Poppins', sans-serif;
        }

        .card-actions button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            margin-left: 0.5rem;
        }
        .card-actions button:hover svg {
            color: var(--primary-color);
        }

        .card-content {
            padding: 1.5rem;
            max-height: 1000px; /* arbitrary large value */
            opacity: 1;
            transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out, padding 0.4s ease-in-out;
        }
        
        .card-content.collapsed {
            max-height: 0;
            opacity: 0;
            padding-top: 0;
            padding-bottom: 0;
            overflow: hidden;
        }

        .notes-textarea {
            width: 100%;
            min-height: 200px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1rem;
            font-family: 'Roboto', sans-serif;
            font-size: 1rem;
            resize: vertical;
            outline: none;
            transition: border-color var(--transition-speed);
        }

        .notes-textarea:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
        }

        /* --- RESPONSIVE DESIGN --- */
        @media (max-width: 992px) {
            .mobile-menu-toggle {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
                z-index: 1100; /* Above overlay */
            }

            .sidebar.active {
                transform: translateX(0);
                box-shadow: 0 0 20px rgba(0,0,0,0.2);
            }

            .main-content {
                margin-left: 0;
            }

            .overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 1099;
                display: none;
            }
            .overlay.active {
                display: block;
            }

            .editor-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>

    <div class="dashboard-container">
        <header class="header">
            <a href="#" class="logo">
                <img src="https://storage.googleapis.com/proudcity/mebanenc/uploads/2021/03/placeholder-image.png" alt="Modern Farmer Logo">
            </a>
            <span class="logo-text">Admin Panel</span>
            <button class="mobile-menu-toggle" aria-label="Open menu">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
                </svg>
            </button>
        </header>

        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">Manage Courses</div>
            <ul class="sidebar-nav" id="sidebar-nav">
                <!-- Navigation items will be injected here by JavaScript -->
            </ul>
        </aside>

        <main class="main-content" id="main-content">
             <div id="editor-placeholder">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M11 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h1V7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7h1V2zm1 12h2V2h-2v12zm-3 0V7H7v7h2zm-4 0V9H2v5h2z"/>
                </svg>
                <h2>Welcome, Admin!</h2>
                <p>Please select a course from the sidebar to begin managing its content.</p>
            </div>
            <div id="content-editor-container" style="display: none;">
                <!-- The dynamic editor for the selected course will be rendered here -->
            </div>
        </main>
    </div>
    <div class="overlay" id="overlay"></div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- DATA ---
    const pages = {
        'broiler-course-page': { name: 'Broiler Rearing', file: 'broiler-rearing.html' },
        'roadrunner-course-page': { name: 'Roadrunner Rearing', file: 'roadrunner-rearing.html' },
        'mushroom-course-page': { name: 'Mushroom Cultivation', file: 'mushroom-cultivation.html' },
        'fish-course-page': { name: 'Fish Farming', file: 'fish-farming.html' },
        'maize-course-page': { name: 'Maize Farming', file: 'maize-farming.html' },
        'sorghum-course-page': { name: 'Sorghum Farming', file: 'sorghum-farming.html' },
        'tobacco-course-page': { name: 'Tobacco Farming', file: 'tobacco-farming.html' }
    };

    // Placeholder for actual data. In a real app, this would be fetched from a database.
    const courseContentData = {
        'broiler-course-page': [
            { id: Date.now() + 1, title: 'Introduction to Broiler Management', notes: 'This section covers the basics of setting up a broiler farm, including housing, equipment, and initial chick placement.' },
            { id: Date.now() + 2, title: 'Week 1-2: Brooding & Early Care', notes: 'Critical temperature control, feed, and water management for the first two weeks to ensure a strong start for the flock.' },
            { id: Date.now() + 3, title: 'Health and Disease Prevention', notes: 'A guide to common broiler diseases, vaccination schedules, and biosecurity measures to keep your birds healthy.' }
        ]
        // Other pages would have their data here
    };

    const icons = {
        default: `<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg>`,
        broiler: `<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M12.33 11.03a.5.5 0 0 0 .2-.97c.22-.07.45-.14.68-.22 1.33-.45 2.22-1.39 2.22-2.58 0-1.6-1.52-2.8-3.03-2.8-1.1 0-2.02.6-2.45 1.42a.5.5 0 0 0 .9.43c.32-.64.95-1.05 1.55-1.05 1.05 0 2.23.97 2.23 2 0 .73-.55 1.26-1.23 1.5l-.06.02c-.44.15-.88.3-1.3.43-.45.15-.87.32-1.25.5-.9.4-1.26.9-1.26 1.48 0 .42.27.7.6.82a.5.5 0 0 0 .62-.33zM5.38 13.5a.5.5 0 0 0 .58-.41c.21-1.4.32-2.9.32-4.5V4.5a.5.5 0 0 0-1 0V8.5c0 1.6-.1 3.1-.3 4.58a.5.5 0 0 0 .4.42zM4 5.5a.5.5 0 0 0-1 0v3a.5.5 0 0 0 1 0v-3zM2 6.5a.5.5 0 0 0-1 0v2a.5.5 0 0 0 1 0v-2zM14 8.5a.5.5 0 0 0-1 0v1a.5.5 0 0 0 1 0v-1z"/></svg>`,
    };

    // --- DOM ELEMENTS ---
    const sidebarNav = document.getElementById('sidebar-nav');
    const mainContent = document.getElementById('main-content');
    const editorContainer = document.getElementById('content-editor-container');
    const editorPlaceholder = document.getElementById('editor-placeholder');
    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');

    // --- INITIALIZATION ---
    function init() {
        populateSidebar();
        attachEventListeners();
    }

    // --- POPULATE UI ---
    function populateSidebar() {
        let navHTML = '';
        for (const [id, page] of Object.entries(pages)) {
            const iconKey = id.split('-')[0];
            const icon = icons[iconKey] || icons.default;
            navHTML += `
                <li class="nav-item">
                    <a href="#" data-page-id="${id}">
                        ${icon}
                        <span>${page.name}</span>
                    </a>
                </li>
            `;
        }
        sidebarNav.innerHTML = navHTML;
    }

    // --- EVENT LISTENERS ---
    function attachEventListeners() {
        sidebarNav.addEventListener('click', handleSidebarClick);
        mobileMenuToggle.addEventListener('click', toggleMobileMenu);
        overlay.addEventListener('click', toggleMobileMenu);
        
        // Use event delegation for dynamically created elements inside the editor
        editorContainer.addEventListener('click', handleEditorActions);
    }
    
    function handleSidebarClick(e) {
        const link = e.target.closest('a');
        if (!link) return;
        
        e.preventDefault();
        
        // Update active link style
        document.querySelectorAll('#sidebar-nav .nav-item a').forEach(a => a.classList.remove('active'));
        link.classList.add('active');
        
        const pageId = link.dataset.pageId;
        renderEditor(pageId);

        // Close mobile menu on selection
        if (sidebar.classList.contains('active')) {
            toggleMobileMenu();
        }
    }

    function toggleMobileMenu() {
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
    }
    
    function handleEditorActions(e) {
        const target = e.target;

        if (target.closest('.btn-add-new')) {
            addNewCard();
        }
        if (target.closest('.btn-save-all')) {
            saveAllChanges();
        }
        if (target.closest('.card-header')) {
            toggleCard(target.closest('.notes-card'));
        }
        if (target.closest('.btn-delete-card')) {
            deleteCard(target.closest('.notes-card'));
        }
    }
    
    // --- EDITOR LOGIC ---
    function renderEditor(pageId) {
        const page = pages[pageId];
        if (!page) return;

        editorPlaceholder.style.display = 'none';

        const content = courseContentData[pageId] || [];

        let cardsHTML = content.map(card => createCardHTML(card.id, card.title, card.notes)).join('');

        editorContainer.innerHTML = `
            <div class="editor-header">
                <h1>Editing: ${page.name}</h1>
                <div class="editor-actions">
                    <button class="btn-primary btn-add-new">Add New Section</button>
                    <button class="btn-primary btn-save-all">Save All Changes</button>
                </div>
            </div>
            <div id="notes-card-list">
                ${cardsHTML}
            </div>
        `;
        editorContainer.dataset.currentPage = pageId;
        editorContainer.style.display = 'block';
    }

    function createCardHTML(id, title = '', notes = '', isCollapsed = false) {
        return `
            <div class="notes-card" data-card-id="${id}">
                <div class="card-header">
                    <span class="card-toggle-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                           <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/>
                        </svg>
                    </span>
                    <input type="text" class="card-title-input" value="${title}" placeholder="Enter section title...">
                    <div class="card-actions">
                        <button class="btn-delete-card" aria-label="Delete section">
                           <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" color="#e53935" viewBox="0 0 16 16"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/></svg>
                        </button>
                    </div>
                </div>
                <div class="card-content ${isCollapsed ? 'collapsed' : ''}">
                    <textarea class="notes-textarea" placeholder="Enter your detailed notes for this section here...">${notes}</textarea>
                </div>
            </div>
        `;
    }

    function addNewCard() {
        const cardList = document.getElementById('notes-card-list');
        const newCardId = Date.now();
        const newCardHTML = createCardHTML(newCardId, 'New Section', '', false);
        cardList.insertAdjacentHTML('beforeend', newCardHTML);
        
        // Scroll to the new card and focus its title
        const newCardElement = cardList.lastElementChild;
        newCardElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
        newCardElement.querySelector('.card-title-input').focus();
    }

    function saveAllChanges() {
        const currentPageId = editorContainer.dataset.currentPage;
        if (!currentPageId) {
            alert('Error: No page selected.');
            return;
        }

        const cards = document.querySelectorAll('#notes-card-list .notes-card');
        const updatedContent = [];
        
        cards.forEach(card => {
            const id = card.dataset.cardId;
            const title = card.querySelector('.card-title-input').value.trim();
            const notes = card.querySelector('.notes-textarea').value.trim();
            
            if (title) { // Only save cards that have a title
                updatedContent.push({ id, title, notes });
            }
        });

        courseContentData[currentPageId] = updatedContent;
        
        // In a real application, you would now send this `courseContentData` object
        // to your server/database via an API call (e.g., fetch, Axios).
        console.log('Saving data for:', currentPageId);
        console.log(JSON.stringify(courseContentData[currentPageId], null, 2));
        
        alert(`Content for "${pages[currentPageId].name}" has been saved successfully! (Check the console to see the data structure)`);
    }
    
    function toggleCard(cardElement) {
        const content = cardElement.querySelector('.card-content');
        content.classList.toggle('collapsed');
    }
    
    function deleteCard(cardElement) {
        if (confirm('Are you sure you want to delete this section? This action cannot be undone.')) {
            cardElement.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
            cardElement.style.opacity = '0';
            cardElement.style.transform = 'scale(0.95)';
            setTimeout(() => {
                cardElement.remove();
            }, 300);
        }
    }
    
    // --- START THE APP ---
    init();
});
</script>
</body>
</html>
